# خطة تحسينات دراسة الجدوى

## نظرة عامة
هذا المستند يحتوي على خطة تنفيذ التحسينات المطلوبة لنظام دراسة الجدوى على عدة مراحل منظمة.

---

## المرحلة الأولى: تحسينات المحرر (Editor Improvements)

### 1.1 إصلاح حركة الشاشة في المحرر
- **المشكلة**: الحركة الحرة للصفحة مزعجة وصعبة
- **الحل**: 
  - تثبيت الصفحة في منتصف الشاشة أفقياً
  - السماح بالتمرير عمودياً فقط (لأعلى ولأسفل)
  - دعم التمرير بالماوس وأزرار الكيبورد
  - إزالة إمكانية السحب الحر (drag)
- **الملفات المتأثرة**:
  - `components/feasibility/editor/EditorCanvas.tsx`
  - `components/feasibility/editor/EditorLayout.tsx`

### 1.2 جعل عناوين الأقسام قابلة للتعديل
- **المشكلة**: عناوين الأقسام ثابتة ولا يمكن تغييرها
- **الحل**:
  - إضافة خاصية `title` قابلة للتعديل لكل شريحة
  - إنشاء مكون `EditableTitle` للعناوين
  - تحديث جميع أنواع الشرائح لدعم العناوين المخصصة
- **الملفات المتأثرة**:
  - `types/feasibility.ts`
  - `hooks/useSlides.ts`
  - جميع مكونات الشرائح في `components/feasibility/slides/`

### 1.3 تعديل تاريخ الغلاف للعربية
- **المشكلة**: التاريخ يظهر بالتنسيق الإنجليزي
- **الحل**:
  - استخدام `Intl.DateTimeFormat` مع اللغة العربية
  - تنسيق: "٢١ يناير ٢٠٢٦"
- **الملفات المتأثرة**:
  - `components/feasibility/slides/CoverSlide.tsx`

### 1.4 إعادة ترتيب "أُعدت خصيصاً ل"
- **المشكلة**: النص الحالي غير مرتب بشكل صحيح
- **الحل**:
  - نقل "أُعدت خصيصاً للعميل:" لتكون أعلى الاسم
  - تحسين التنسيق البصري
- **الملفات المتأثرة**:
  - `components/feasibility/slides/CoverSlide.tsx`

---

## المرحلة الثانية: تحسينات صفحة العميل (Viewer Improvements) ✅

### 2.1 الفصل البصري بين الشرائح ✅
- **المشكلة**: الأقسام متداخلة في بعضها
- **الحل**:
  - ✅ وضع كل شريحة في مستطيل منفصل مع `border-radius: 20px`
  - ✅ إضافة `box-shadow` مع تأثير hover
  - ✅ إضافة مسافات `space-y-8` بين الشرائح
  - ✅ إضافة شريط علوي ملون لكل شريحة (gradient)
- **الملفات المُعدلة**:
  - `components/feasibility/viewer/StudyViewer.tsx`

### 2.2 عرض قسم الخيارات على اليمين ✅
- **المشكلة**: قسم الخيارات غير ظاهر في صفحة العميل
- **الحل**:
  - ✅ إنشاء شريط جانبي (sidebar) متحرك على اليمين
  - ✅ عرض قائمة الشرائح مع أيقونات وأسماء عربية
  - ✅ إمكانية التنقل السريع للشريحة بالنقر عليها
  - ✅ زر ثابت لفتح القائمة
  - ✅ تصميم متجاوب مع Framer Motion animations
- **الملفات المُعدلة**:
  - `components/feasibility/viewer/StudyViewer.tsx`

---

## المرحلة الثالثة: تحسينات العناصر (Items Improvements)

### 3.1 إضافة صورة ووصف للعناصر
- **المشكلة**: العناصر تعرض فقط الاسم والسعر
- **الحل**:
  - إضافة خاصية `image` للعنصر
  - إضافة خاصية `description` للعنصر
  - تحديث واجهة عرض العناصر لإظهار الصورة والوصف
- **الملفات المتأثرة**:
  - `types/feasibility.ts`
  - `lib/feasibility/bedroom-items.ts`
  - `lib/feasibility/kitchen-items.ts`
  - `lib/feasibility/bathroom-items.ts`
  - `lib/feasibility/living-room-items.ts`
  - `components/feasibility/slides/RoomSlide.tsx`
  - مكونات عرض العناصر

---

## المرحلة الرابعة: إزالة وتعديل المكونات

### 4.1 إزالة صفحة تكوين الشقة
- **المشكلة**: رسالة "تم تكوين الشقة بنجاح، تم إنشاء ٤ غرف" غير مطلوبة
- **الحل**:
  - إزالة الشريحة أو الرسالة المعنية
  - تبسيط تدفق العمل
- **الملفات المتأثرة**:
  - `components/feasibility/slides/RoomSetupSlide.tsx`
  - `hooks/useSlides.ts`

### 4.2 إزالة ودجت الشقق المحيطة الصغير
- **المشكلة**: ودجت الشقق بدون تفاصيل أسفل الخريطة غير مطلوب
- **الحل**:
  - إزالة المكون من أسفل الخريطة
  - الإبقاء على ودجت الشقق المفصل فقط
- **الملفات المتأثرة**:
  - `components/feasibility/slides/MapSlide.tsx`
  - `components/feasibility/slides/NearbyApartmentsSlide.tsx`

### 4.3 زيادة عدد الشقق المسموح
- **المشكلة**: حد أقصى محدود لعدد الشقق
- **الحل**:
  - رفع الحد الأقصى إلى 20 شقة
  - إزالة أي قيود على العدد في الواجهة
- **الملفات المتأثرة**:
  - `components/feasibility/slides/NearbyApartmentsSlide.tsx`
  - API routes المتعلقة

---

## ملخص المهام

| المرحلة | المهمة | الأولوية | الحالة |
|---------|--------|----------|--------|
| 1 | إصلاح حركة الشاشة في المحرر | عالية | ✅ مكتملة |
| 1 | جعل عناوين الأقسام قابلة للتعديل | عالية | ✅ مكتملة |
| 1 | تعديل تاريخ الغلاف للعربية | متوسطة | ✅ مكتملة |
| 1 | إعادة ترتيب "أُعدت خصيصاً ل" | متوسطة | ✅ مكتملة |
| 2 | الفصل البصري بين الشرائح | عالية | ⏳ قيد الانتظار |
| 2 | عرض قسم الخيارات على اليمين | عالية | ⏳ قيد الانتظار |
| 3 | إضافة صورة ووصف للعناصر | متوسطة | ⏳ قيد الانتظار |
| 4 | إزالة صفحة تكوين الشقة | منخفضة | ✅ مكتملة |
| 4 | إزالة ودجت الشقق الصغير | منخفضة | ⏳ قيد الانتظار |
| 4 | زيادة عدد الشقق إلى 20 | منخفضة | ⏳ قيد الانتظار |

---

## ملاحظات التنفيذ

### الاعتماديات بين المهام
1. المرحلة الأولى مستقلة ويمكن تنفيذها بالتوازي
2. المرحلة الثانية تعتمد جزئياً على المرحلة الأولى (خاصة العناوين القابلة للتعديل)
3. المرحلة الثالثة مستقلة
4. المرحلة الرابعة مستقلة

### اختبارات مطلوبة
- [ ] اختبار حركة المحرر على مختلف أحجام الشاشات
- [ ] اختبار تعديل العناوين وحفظها
- [ ] اختبار عرض صفحة العميل مع الشريط الجانبي
- [ ] اختبار إضافة صور وأوصاف للعناصر
- [ ] اختبار إضافة 20 شقة

### التوافق
- التأكد من التوافق مع المتصفحات المختلفة
- التأكد من التجاوب مع الشاشات المختلفة (responsive)
- التأكد من عدم تأثر الدراسات الموجودة مسبقاً

---

## الجدول الزمني المقترح

| المرحلة | المدة المتوقعة |
|---------|---------------|
| المرحلة الأولى | 2-3 أيام |
| المرحلة الثانية | 2-3 أيام |
| المرحلة الثالثة | 1-2 يوم |
| المرحلة الرابعة | 1 يوم |
| الاختبار والمراجعة | 1-2 يوم |
| **الإجمالي** | **7-11 يوم** |

---

*آخر تحديث: ٢١ يناير ٢٠٢٦*
